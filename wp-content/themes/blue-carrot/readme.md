# Тестове завдання для вакансії WordPress Developer

## Опис

Цей проект демонструє реалізацію класу `WordPressObject` для роботи з конкретними об'єктами кастомних типів записів у WordPress, з додатковою функціональністю для валідації мета-полів. Проект включає два класи, `Company` і `Employer`, кожен з яких має свій набір мета-полів, що валідовані при створенні або оновленні. Якщо валідація не проходить, до об'єкта додається поле `errors`, що містить усі помилки валідації. Крім того, клас `Employer` має зв'язок із компанією, і якщо вказана компанія не існує, створення або оновлення співробітника не виконується.

## Структура файлів проєкту

- `include/custom-post-types.php` - Файл для реєстрації кастомних типів записів `company` та `employer`.
- `include/WordPressObject.php` - Базовий клас для роботи з конкретними об'єктами кастомних типів записів та їх мета-полями.
- `include/Company.php` - Клас для роботи з об'єктами типу `company`, що містить специфічні мета-поля та валідацію.
- `include/Employer.php` - Клас для роботи з об'єктами типу `employer`, що містить специфічні мета-поля та валідацію, а також зв'язок із компанією.
- `style.css` - Стилі для теми WordPress.
- `functions.php` - Підключає файли та ініціалізує функціонал теми.
- `index.php` - Головний файл теми, що демонструє використання CRUD операцій.

## Інструкція з встановлення

1. Скопіюйте папку з цим проектом до директорії `wp-content/themes/` вашого WordPress сайту.
2. Активуйте тему через адмін-панель WordPress у розділі "Зовнішній вигляд" -> "Теми".
3. Відкрийте головну сторінку вашого сайту для перегляду результатів роботи.

## Завдання

### Загальна мета

Розробити базовий клас `WordPressObject`, за допомогою якого можна виконувати базові CRUD операції. Створити два класи, `Company` та `Employer`, які успадковуватимуть цей базовий клас. Кожен з цих класів повинен мати свій власний набір мета-полів, що будуть валідовані при створенні або оновленні записів. Якщо валідація не проходить, об'єкт повинен містити поле `errors` з описом помилок.

### Вимоги до класів

1. **`WordPressObject` (базовий клас)**:
   - Повинен забезпечувати основні CRUD операції (створення, читання, оновлення, видалення) для об'єктів кастомних типів записів у WordPress.
   - Повинен мати функціональність для валідації мета-полів та збереження їх значень у базі даних.
   - Якщо валідація не проходить, методи `update` та `create` повинні повертати `false`, а в об'єкті повинно з'являтися поле `errors` з описом помилок.

2. **`Company` (імплементація класу для компаній)**:
   - Повинен успадковувати клас `WordPressObject` і використовувати кастомний тип записів `company`.
   - Мета-поля для `Company`:
      - **location**: Місцезнаходження компанії. Повинно бути непорожнім рядком.
      - **industry**: Індустрія, до якої належить компанія. Повинно бути непорожнім рядком.
   - Повинна бути реалізована валідація для кожного мета-поля.

3. **`Employer` (імплементація класу для співробітників)**:
   - Повинен успадковувати клас `WordPressObject` і використовувати кастомний тип записів `employer`.
   - Мета-поля для `Employer`:
      - **position**: Посада співробітника. Повинна бути непорожнім рядком.
      - **salary**: Зарплата співробітника. Повинна бути числовим значенням, що більше нуля.
      - **company_id**: ID компанії, до якої належить співробітник. Повинен бути валідним ID існуючого запису типу `company`.
   - Повинна бути реалізована валідація для кожного мета-поля, включаючи перевірку на існування компанії з відповідним `company_id`. Якщо компанія не існує, об'єкт не може бути створений або оновлений, і відповідна помилка додається до поля `errors`.


## Використання

### Мета-поля для Company

- **location**: Місцезнаходження компанії. Повинно бути непорожнім рядком.
- **industry**: Індустрія, до якої належить компанія. Повинно бути непорожнім рядком.

### Мета-поля для Employer

- **position**: Посада співробітника. Повинна бути непорожнім рядком.
- **salary**: Зарплата співробітника. Повинна бути числовим значенням, що більше нуля.
- **company_id**: ID компанії, до якої належить співробітник. Повинен бути валідним ID існуючого запису типу `company`.

### CRUD Операції

Після активації теми на головній сторінці (`index.php`) демонструється наступний функціонал (у самому файлі позначені деякі з методів класів, які викликаються для виконання певних операцій, також можна додати інші методи для демонстрації роботи з об'єктами):

1. **Створення нової компанії з правильними даними**:
    - Використовується клас `Company` для створення нового запису типу `company` з валідними значеннями мета-полів `location` та `industry`.

2. **Спроба створити нову компанію з некоректними даними**:
    - Використовується клас `Company` для створення нового запису типу `company` з некоректними або відсутніми значеннями мета-полів, що призводить до помилок валідації.

3. **Створення нового співробітника з правильними даними, прив'язкою до існуючої компанії**:
    - Використовується клас `Employer` для створення нового запису типу `employer` з валідними значеннями мета-полів `position`, `salary` та `company_id`.

4. **Спроба створити нового співробітника з некоректним company_id**:
    - Використовується клас `Employer` для створення нового запису типу `employer` з некоректним `company_id`, що призводить до помилок валідації.

5. **Оновлення об'єктів**:
    - Після створення компанії або співробітника можна оновити їх дані та знову перевірити їх на валідність.

6. **Читання та видалення об'єктів**:
    - Читання інформації про створені компанії та співробітників з бази даних, а також можливість видалення записів. Якщо співробітник прив'язаний до неіснуючої компанії, у його полі `errors` буде зазначена відповідна помилка.

## Обробка помилок валідації

Якщо під час створення або оновлення об'єкта виникають помилки валідації, вони зберігаються в полі `errors` об'єкта. Це поле містить асоціативний масив з іменами полів і відповідними повідомленнями про помилки.

Приклад обробки помилок валідації:

```php
$company = new Company();
if (!$company->update('TechCorp', 'This is a leading tech company.', ['location' => 'Kyiv', 'industry' => ''])) {
    echo 'Company creation failed with errors: ' . implode(', ', $company->errors) . '<br>';
}
```

## Результат

- Після встановлення теми, при відкритті головної сторінки (`index.php`) на сайті буде відображено результати виконання CRUD операцій для об'єктів `Company` та `Employer`. 
- Всі файли проєкту розмістити в архіві
- Zip-архів `result.zip` завантажити на Google Drive, посилання надіслати на електронну адресу: `mariia.chekanina@tips.gg`